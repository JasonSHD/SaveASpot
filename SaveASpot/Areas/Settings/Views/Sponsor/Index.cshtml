@model SaveASpot.Areas.Settings.Models.SponsorList

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutDetailAdmin.cshtml";
}

@section SideBar {
    @Html.Partial("AdminMenu")
}

<div id="pad-wrapper">
    <div class="table-wrapper products-table section">
        <div class="row-fluid head">
            <div class="span12">
                <h4>Sponsors</h4>
            </div>
        </div>

        <div class="row-fluid filter-block">
            <div class="pull-right">
                <a href="@Url.Action("New")" class="btn-flat primary new-product">+ Add sponsor</a>
            </div>
        </div>

        <div class="row-fluid">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th class="span3">Sponsor</th>
                        <th class="span3">
                            <span class="line"></span>Description
                        </th>
                        <th class="span3">
                            <span class="line"></span>Logo
                        </th>
                        <th class="span3">
                            <span class="line"></span>Actions
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var phase in Model.Sponsors)
                    {
                    <tr>
                        <td>
                            <a href="@Url.Action("Edit", new { id = phase.SponsorID })" class="name">@phase.Name</a>
                        </td>
                        <td class="description">
                            @phase.Description
                        </td>
                        <td>
                            <a href="@phase.Url" target="_blank"><img src="@phase.ImageUrl" alt="@phase.Name" class="table-image" /></a>
                        </td>
                        <td>
                            <a href="@Url.Action("Edit", new { id = phase.SponsorID })" class="btn-flat white">Edit</a>
                            <a href="@Url.Action("Delete", new { id = phase.SponsorID })" class="btn-flat danger delete-sponsor">Delete</a>
                        </td>
                    </tr>
    
                    } 
                </tbody>
            </table>
        </div>
    </div>
</div>

@section footer {
    <script type="text/javascript">
        $(function () {
            $(".delete-sponsor").click(function (event) {
                event.preventDefault();
                if (confirm("Are you sure you want to delete this sponsor?")) {
                    var button = $(this);
                    var url = button.attr("href");

                    $.post(url, null, function (result) {
                        if (result.success) {
                            button.parent().parent().remove();
                        }
                        else {
                            alert("there was an issue deleting");
                        }
                    }, "json");
                }
            });
        });
    </script>
}

