@model SaveASpot.Data.Models.Cart

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutDetailAdmin.cshtml";
}

@section SideBar {
    @Html.Partial("AdminMenu")
}

<div id="pad-wrapper">
    <div class="table-wrapper products-table section">
        <div class="row-fluid head">
            <div class="span12">
                <h4>Sponsors Cart</h4>
            </div>
        </div>

        <div class="row-fluid">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th class="span4">Sponsor Spot</th>
                        <th class="span4">
                            <span class="line"></span>Price
                        </th>
                        <th class="span4">
                            <span class="line"></span>Actions
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var phase in Model.Items)
                    {
                    <tr>
                        <td>
                            <a href="@Url.Action("Edit", new { id = phase.SpotID })" class="name">@phase.Phase</a>
                        </td>
                        <td class="description">
                            N/A
                        </td>
                        <td>
                            <a href="@Url.Action("Remove", new { area = "API", controller = "Cart", id = phase.SpotID })" class="btn-flat danger delete-sponsor">Delete</a>
                        </td>
                    </tr>
    
                    } 
                </tbody>
            </table>
        </div>

        <div class="row-fluid filter-block">
            @using (Html.BeginForm())
            {
                <input type="hidden" id="SponsorID" name="SponsorID" value="@Model.SponsorID" />
                <button type="submit" class="btn-flat primary">Save to Sponsor</button>
            }
        </div>
    </div>
</div>

@section footer {
    <script type="text/javascript">
        $(function () {
            $(".delete-sponsor").click(function (event) {
                event.preventDefault();
                if (confirm("Are you sure you want to delete this sponsor?")) {
                    var button = $(this);
                    var url = button.attr("href");

                    $.post(url, null, function (result) {
                        if (result.success) {
                            button.parent().parent().remove();
                        }
                        else {
                            alert("there was an issue deleting");
                        }
                    }, "json");
                }
            });
        });
    </script>
}

