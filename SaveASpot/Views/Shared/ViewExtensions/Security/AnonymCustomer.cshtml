@using Newtonsoft.Json
@using SaveASpot.Core.Security
@model SaveASpot.ViewModels.ViewExtensions.UserCartViewModel
<script>
	q(function () {
		q.security.currentUser().authenticate(@Html.Raw(JsonConvert.SerializeObject(Model.User.AsUserJson()))).
			anonym(@Html.Raw(JsonConvert.SerializeObject(Model.User.AsUserJson())));
		q.controls.currentUser();

		q.cart.currentCart().cart(@Html.Raw(JsonConvert.SerializeObject(Model.Cart.AsCartJson())));
		q.controls.cart();
	});
</script>
